## Process this file with automake to produce Makefile.in
MMJ_.jar:  \
	$(srcdir)/src/MMStudioPlugin.java \
	$(srcdir)/src/MANIFEST.MF \
	$(srcdir)/src/DeviceListBuilder.java \
	$(srcdir)/src/MMImage5DReaderPlugin_.java \
	$(srcdir)/src/org/micromanager/AcqControlDlg.java \
	$(srcdir)/src/org/micromanager/CalibrationListDlg.java \
	$(srcdir)/src/org/micromanager/CalibrationEditor.java \
	$(srcdir)/src/org/micromanager/ConfigGroupPad.java \
	$(srcdir)/src/org/micromanager/ConfigPadButtonPanel.java \
	$(srcdir)/src/org/micromanager/FastAcqDlg.java \
	$(srcdir)/src/org/micromanager/GroupEditor.java \
	$(srcdir)/src/org/micromanager/MMAboutDlg.java \
	$(srcdir)/src/org/micromanager/MMAcquisitionEngineMT.java \
	$(srcdir)/src/org/micromanager/MMIntroDlg.java \
	$(srcdir)/src/org/micromanager/MMOptions.java \
	$(srcdir)/src/org/micromanager/MMStudioMainFrame.java \
	$(srcdir)/src/org/micromanager/OptionsDlg.java \
	$(srcdir)/src/org/micromanager/PlaybackPanel.java \
	$(srcdir)/src/org/micromanager/PositionListDlg.java \
	$(srcdir)/src/org/micromanager/PresetEditor.java \
	$(srcdir)/src/org/micromanager/PropertyEditor.java \
	$(srcdir)/src/org/micromanager/RegistrationDlg.java \
	$(srcdir)/src/org/micromanager/ScriptPanel.java \
	$(srcdir)/src/org/micromanager/SplitView.java \
	$(srcdir)/src/org/micromanager/TileCreatorDlg.java \
	$(srcdir)/src/org/micromanager/license.txt \
	$(srcdir)/src/org/micromanager/acquisition/MMAcquisition.java \
	$(srcdir)/src/org/micromanager/acquisition/AcquisitionManager.java \
	$(srcdir)/src/org/micromanager/api/Autofocus.java \
	$(srcdir)/src/org/micromanager/api/AcquisitionEngine.java \
        $(srcdir)/src/org/micromanager/api/DeviceControlGUI.java \
	$(srcdir)/src/org/micromanager/api/MMPropertyTableModel.java \
	$(srcdir)/src/org/micromanager/api/ScriptInterface.java \
	$(srcdir)/src/org/micromanager/conf/AddDeviceDlg.java \
	$(srcdir)/src/org/micromanager/conf/ComPortsPage.java \
	$(srcdir)/src/org/micromanager/conf/ConfigGroup.java \
	$(srcdir)/src/org/micromanager/conf/ConfiguratorDlg.java \
	$(srcdir)/src/org/micromanager/conf/DelayPage.java \
	$(srcdir)/src/org/micromanager/conf/Device.java \
	$(srcdir)/src/org/micromanager/conf/DevicesPage.java \
	$(srcdir)/src/org/micromanager/conf/EditPropertiesPage.java \
	$(srcdir)/src/org/micromanager/conf/FinishPage.java \
	$(srcdir)/src/org/micromanager/conf/IntroPage.java \
	$(srcdir)/src/org/micromanager/conf/Label.java \
	$(srcdir)/src/org/micromanager/conf/LabelsPage.java \
	$(srcdir)/src/org/micromanager/conf/MMConfigFileException.java \
	$(srcdir)/src/org/micromanager/conf/MicroscopeModel.java \
	$(srcdir)/src/org/micromanager/conf/PagePanel.java \
	$(srcdir)/src/org/micromanager/conf/PropertyTableModel.java \
	$(srcdir)/src/org/micromanager/conf/RolesPage.java \
	$(srcdir)/src/org/micromanager/conf/Setting.java \
	$(srcdir)/src/org/micromanager/conf/SynchroPage.java \
	$(srcdir)/src/org/micromanager/fastacq/DiskStreamingThread.java \
	$(srcdir)/src/org/micromanager/fastacq/DisplayTimerTask.java \
	$(srcdir)/src/org/micromanager/fastacq/GUIStatus.java \
	$(srcdir)/src/org/micromanager/fastacq/StatusTimerTask.java \
	$(srcdir)/src/org/micromanager/graph/ContrastPanel.java \
	$(srcdir)/src/org/micromanager/graph/GraphData.java \
	$(srcdir)/src/org/micromanager/graph/GraphFrame.java \
	$(srcdir)/src/org/micromanager/graph/GraphPanel.java \
	$(srcdir)/src/org/micromanager/graph/HistogramFrame.java \
	$(srcdir)/src/org/micromanager/graph/HistogramPanel.java \
	$(srcdir)/src/org/micromanager/image5d/ChannelCalibration.java \
	$(srcdir)/src/org/micromanager/image5d/ChannelControl.java \
	$(srcdir)/src/org/micromanager/image5d/ChannelDisplayProperties.java \
	$(srcdir)/src/org/micromanager/image5d/Duplicate_Image5D.java \
	$(srcdir)/src/org/micromanager/image5d/Crop_Image5D.java \
	$(srcdir)/src/org/micromanager/image5d/Hypervolume_Opener.java \
	$(srcdir)/src/org/micromanager/image5d/Image5D.java \
	$(srcdir)/src/org/micromanager/image5d/Image5DCanvas.java \
	$(srcdir)/src/org/micromanager/image5d/Image5DLayout.java \
	$(srcdir)/src/org/micromanager/image5d/Image5DWindow.java \
	$(srcdir)/src/org/micromanager/image5d/Image5D_Stack_to_RGB.java \
	$(srcdir)/src/org/micromanager/image5d/Image5D_Stack_to_RGB_t.java \
	$(srcdir)/src/org/micromanager/image5d/Image5D_to_Stack.java \
	$(srcdir)/src/org/micromanager/image5d/Image5D_Channels_to_Stacks.java \
	$(srcdir)/src/org/micromanager/image5d/Image5D_to_VolumeViewer.java \
	$(srcdir)/src/org/micromanager/image5d/Make_Montage.java \
	$(srcdir)/src/org/micromanager/image5d/New_Image5D.java \
	$(srcdir)/src/org/micromanager/image5d/Open_Image5D.java \
	$(srcdir)/src/org/micromanager/image5d/Open_Series_As_Image5D.java \
	$(srcdir)/src/org/micromanager/image5d/RGB_to_Image5D.java \
	$(srcdir)/src/org/micromanager/image5d/ScrollbarWithLabel.java \
	$(srcdir)/src/org/micromanager/image5d/Set_Channel_Display.java \
	$(srcdir)/src/org/micromanager/image5d/Set_Channel_Labels.java \
	$(srcdir)/src/org/micromanager/image5d/Set_Position.java \
	$(srcdir)/src/org/micromanager/image5d/Spacer_Image5D.java \
	$(srcdir)/src/org/micromanager/image5d/Stack_to_Image5D.java \
	$(srcdir)/src/org/micromanager/image5d/Split_Image5D.java \
	$(srcdir)/src/org/micromanager/image5d/Test_Save.java \
	$(srcdir)/src/org/micromanager/image5d/Transfer_Channel_Settings.java \
	$(srcdir)/src/org/micromanager/image5d/Z_Project.java \
	$(srcdir)/src/org/micromanager/metadata/AcquisitionData.java \
	$(srcdir)/src/org/micromanager/metadata/DisplaySettings.java \
	$(srcdir)/src/org/micromanager/metadata/ImageKey.java \
	$(srcdir)/src/org/micromanager/metadata/ImagePropertyKeys.java \
	$(srcdir)/src/org/micromanager/metadata/MMAcqDataException.java\
	$(srcdir)/src/org/micromanager/metadata/MetadataDlg.java\
	$(srcdir)/src/org/micromanager/metadata/SummaryKeys.java\
	$(srcdir)/src/org/micromanager/navigation/MultiStagePosition.java \
	$(srcdir)/src/org/micromanager/navigation/PositionList.java \
	$(srcdir)/src/org/micromanager/navigation/StagePosition.java \
	$(srcdir)/src/org/micromanager/navigation/CenterAndDragListener.java \
	$(srcdir)/src/org/micromanager/navigation/XYZKeyListener.java \
	$(srcdir)/src/org/micromanager/navigation/ZWheelListener.java \
	$(srcdir)/src/org/micromanager/script/BeanshellEngine.java \
	$(srcdir)/src/org/micromanager/script/MMScriptFrame.java \
	$(srcdir)/src/org/micromanager/script/MMScriptView.java \
	$(srcdir)/src/org/micromanager/script/ScriptPanelMessageWindow.java \
	$(srcdir)/src/org/micromanager/utils/Annotator.java \
	$(srcdir)/src/org/micromanager/utils/AutofocusBase.java \
	$(srcdir)/src/org/micromanager/utils/AutofocusManager.java \
	$(srcdir)/src/org/micromanager/utils/AutofocusPropertyEditor.java \
	$(srcdir)/src/org/micromanager/utils/Calibration.java \
	$(srcdir)/src/org/micromanager/utils/CalibrationList.java \
	$(srcdir)/src/org/micromanager/utils/CfgFileFilter.java \
	$(srcdir)/src/org/micromanager/utils/ChannelSpec.java \
	$(srcdir)/src/org/micromanager/utils/ColorEditor.java \
	$(srcdir)/src/org/micromanager/utils/ColorRenderer.java \
	$(srcdir)/src/org/micromanager/utils/ContrastSettings.java \
	$(srcdir)/src/org/micromanager/utils/CoreAutofocus.java \
	$(srcdir)/src/org/micromanager/utils/DisplayMode.java \
	$(srcdir)/src/org/micromanager/utils/GammaSliderCalculator.java \
	$(srcdir)/src/org/micromanager/utils/GUIColors.java \
	$(srcdir)/src/org/micromanager/utils/GUIUtils.java \
	$(srcdir)/src/org/micromanager/utils/ImageController.java \
	$(srcdir)/src/org/micromanager/utils/ImageUtils.java \
	$(srcdir)/src/org/micromanager/utils/JavaUtils.java \
	$(srcdir)/src/org/micromanager/utils/LUTDialog.java \
	$(srcdir)/src/org/micromanager/utils/LargeMessageDlg.java \
	$(srcdir)/src/org/micromanager/utils/MMAutofocusException.java \
	$(srcdir)/src/org/micromanager/utils/MMDialog.java \
	$(srcdir)/src/org/micromanager/utils/MMException.java \
	$(srcdir)/src/org/micromanager/utils/MMFrame.java \
	$(srcdir)/src/org/micromanager/utils/MMImageWindow.java \
	$(srcdir)/src/org/micromanager/utils/MMScriptException.java \
	$(srcdir)/src/org/micromanager/utils/MMSerializationException.java \
	$(srcdir)/src/org/micromanager/utils/MMSnapshotWindow.java \
	$(srcdir)/src/org/micromanager/utils/MemoryUtils.java \
	$(srcdir)/src/org/micromanager/utils/NumberUtils.java \
	$(srcdir)/src/org/micromanager/utils/PositionMode.java \
	$(srcdir)/src/org/micromanager/utils/ProgressBar.java \
	$(srcdir)/src/org/micromanager/utils/PropertyUsageCellEditor.java \
	$(srcdir)/src/org/micromanager/utils/PropertyValueCellEditor.java \
	$(srcdir)/src/org/micromanager/utils/PropertyUsageCellRenderer.java \
	$(srcdir)/src/org/micromanager/utils/PropertyNameCellRenderer.java \
	$(srcdir)/src/org/micromanager/utils/PropertyValueCellRenderer.java \
	$(srcdir)/src/org/micromanager/utils/PropertyItem.java \
	$(srcdir)/src/org/micromanager/utils/PropertyTableData.java \
	$(srcdir)/src/org/micromanager/utils/ReportingUtils.java \
	$(srcdir)/src/org/micromanager/utils/ScriptFileFilter.java \
	$(srcdir)/src/org/micromanager/utils/ShowFlags.java \
	$(srcdir)/src/org/micromanager/utils/ShowFlagsPanel.java \
	$(srcdir)/src/org/micromanager/utils/SliceMode.java \
	$(srcdir)/src/org/micromanager/utils/SliderPanel.java \
	$(srcdir)/src/org/micromanager/utils/TextUtils.java \
	$(srcdir)/src/org/micromanager/utils/WaitDialog.java \
	$(srcdir)/bin/plugins_mmstudio.config 
	test -d build || mkdir build
	rm -rf build/*
	cp $(srcdir)/bin/plugins_mmstudio.config build/plugins.config
	$(JAVAC) -source 1.5 -target 1.5 -sourcepath ../MMCoreJ_wrap:$(srcdir)/src:../hcs/src:. -classpath $(IJJARPATH):$(BSHJARPATH):$(SWINGXJARPATH):$(topsrcdir)/bin/MMCoreJ.jar:. $(srcdir)/src/*.java $(srcdir)/src/org/micromanager/utils/*.java -d build
	cp -rf $(srcdir)/src/org/micromanager/icons build/org/micromanager
	## Work around bug in 'jar': jar cf MM_.jar -C bin/ bin/* does not work
	cd build && jar cf ../MMJ_.jar * 

MMReader_.jar: \
   $(srcdir)/MMJ_.jar  \
	$(srcdir)/bin/plugins_reader.config 
	cp -f $(srcdir)/bin/plugins_reader.config build/plugins.config
	cd build && jar cf ../MMReader_.jar * 

all: MMJ_.jar MMReader_.jar

install: 
	test -d $(DESTDIR)$(IJPATH)/plugins/Micro-Manager || mkdir -p $(DESTDIR)$(IJPATH)/plugins/Micro-Manager
	cp MMJ_.jar $(DESTDIR)$(IJPATH)/plugins/Micro-Manager

clean:
	test -e MMJ_.jar && rm MMJ_.jar || echo "MMJ_.jar not found"
	test -e MMReader_.jar && rm MMReader_.jar || echo "MMReader_.jar not found"

javadoc:
	test -d $(srcdir)/doc || mkdir $(srcdir)/doc
	rm -rf $(srcdir)/doc/*
	javadoc -public -classpath $(IJJARPATH):$(BSHJARPATH):$(IJPATH)/plugins/Micro-Manager/MMCoreJ.jar:$(IJPATH)/plugins/Micro-Manager/MMJ_.jar:. -d doc $(srcdir)/src/org/micromanager/*.java $(srcdir)/src/org/micromanager/*/*.java

EXTRA_DIST = bin src build.xml license.txt
